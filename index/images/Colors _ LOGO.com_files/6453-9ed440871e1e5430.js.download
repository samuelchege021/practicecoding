"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6453],{96453:function(e,t,r){r.d(t,{Gr:function(){return ex},Ny:function(){return eR},SS:function(){return ew},cC:function(){return eS},aS:function(){return ek},NQ:function(){return eF}});var n,i,s=/^[a-zA-Z:_][a-zA-Z0-9:_.-]*$/,a={revert:function(){}},u=new Map,o=new Set;function l(e){var t=u.get(e);return t||(t={element:e,attributes:{}},u.set(e,t)),t}function c(e,t,r,n,i){var s=r(e),a={isDirty:!1,originalValue:s,virtualValue:s,mutations:[],el:e,observer:new MutationObserver(function(){var t=r(e);t!==a.virtualValue&&(a.originalValue=t,i(a))}),mutationRunner:i,setValue:n,getCurrentValue:r};return a.observer.observe(e,"html"===t?{childList:!0,subtree:!0,attributes:!0,characterData:!0}:{childList:!1,subtree:!1,attributes:!0,attributeFilter:[t]}),a}function h(e,t){var r=t.getCurrentValue(t.el);t.virtualValue=e,e&&"string"!=typeof e?r&&e.parentNode===r.parentNode&&e.insertBeforeNode===r.insertBeforeNode||(t.isDirty=!0,V()):e!==r&&(t.isDirty=!0,V())}function f(e){var t,r=e.originalValue;e.mutations.forEach(function(e){return r=e.mutate(r)}),h((t=r,n||(n=document.createElement("div")),n.innerHTML=t,n.innerHTML),e)}function d(e){var t=new Set(e.originalValue.split(/\s+/).filter(Boolean));e.mutations.forEach(function(e){return e.mutate(t)}),h(Array.from(t).filter(Boolean).join(" "),e)}function p(e){var t=e.originalValue;e.mutations.forEach(function(e){return t=e.mutate(t)}),h(t,e)}function m(e){var t=e.originalValue;e.mutations.forEach(function(e){t=function(e){var t=e.parentSelector,r=e.insertBeforeSelector,n=document.querySelector(t);if(!n)return null;var i=r?document.querySelector(r):null;return r&&!i?null:{parentNode:n,insertBeforeNode:i}}(e.mutate())||t}),h(t,e)}var _=function(e){return e.innerHTML},g=function(e,t){return e.innerHTML=t};function v(e){var t=l(e);return t.html||(t.html=c(e,"html",_,g,f)),t.html}var y=function(e){return{parentNode:e.parentElement,insertBeforeNode:e.nextElementSibling}},b=function(e,t){t.parentNode.insertBefore(e,t.insertBeforeNode)};function x(e){var t=l(e);return t.position||(t.position=c(e,"position",y,b,m)),t.position}var E=function(e,t){return t?e.className=t:e.removeAttribute("class")},A=function(e){return e.className};function w(e){var t=l(e);return t.classes||(t.classes=c(e,"class",A,E,d)),t.classes}function S(e,t){var r=l(e);return r.attributes[t]||(r.attributes[t]=c(e,t,function(e){var r;return null!=(r=e.getAttribute(t))?r:null},function(e,r){return null!==r?e.setAttribute(t,r):e.removeAttribute(t)},p)),r.attributes[t]}function k(e,t,r){if(r.isDirty){r.isDirty=!1;var n,i,s,a,o,l,c,h,f,d,p=r.virtualValue;!r.mutations.length&&(d=u.get(e))&&("html"===t?(null==(n=d.html)||null==(i=n.observer)||i.disconnect(),delete d.html):"class"===t?(null==(s=d.classes)||null==(a=s.observer)||a.disconnect(),delete d.classes):"position"===t?(null==(o=d.position)||null==(l=o.observer)||l.disconnect(),delete d.position):(null==(c=d.attributes)||null==(h=c[t])||null==(f=h.observer)||f.disconnect(),delete d.attributes[t])),r.setValue(e,p)}}var F=!1;function R(e,t){e.html&&k(t,"html",e.html),e.classes&&k(t,"class",e.classes),e.position&&k(t,"position",e.position),Object.keys(e.attributes).forEach(function(r){k(t,r,e.attributes[r])})}function C(){F=!1,u.forEach(R)}function V(){F||(F=!0,requestAnimationFrame(C))}function $(e,t){var r=null;if("html"===e.kind?r=v(t):"class"===e.kind?r=w(t):"attribute"===e.kind?r=S(t,e.attribute):"position"===e.kind&&(r=x(t)),r){var n=r.mutations.indexOf(e);-1!==n&&r.mutations.splice(n,1),r.mutationRunner(r)}}function O(e){var t=new Set(e.elements),r=new Set;document.querySelectorAll(e.selector).forEach(function(n){if(r.add(n),!t.has(n)){var i;e.elements.add(n),i=null,"html"===e.kind?i=v(n):"class"===e.kind?i=w(n):"attribute"===e.kind?i=S(n,e.attribute):"position"===e.kind&&(i=x(n)),i&&(i.mutations.push(e),i.mutationRunner(i))}}),t.forEach(function(t){r.has(t)||(e.elements.delete(t),$(e,t))})}function T(){o.forEach(O)}function M(e){return"undefined"==typeof document?a:(o.add(e),O(e),{revert:function(){e.elements.forEach(function(t){return $(e,t)}),e.elements.clear(),o.delete(e)}})}function N(e,t){return M({kind:"html",elements:new Set,mutate:t,selector:e})}function H(e,t){return M({kind:"position",elements:new Set,mutate:t,selector:e})}function K(e,t){return M({kind:"class",elements:new Set,mutate:t,selector:e})}function I(e,t,r){return s.test(t)?"class"===t||"className"===t?K(e,function(e){var t=r(Array.from(e).join(" "));e.clear(),t&&t.split(/\s+/g).filter(Boolean).forEach(function(t){return e.add(t)})}):M({kind:"attribute",attribute:t,elements:new Set,mutate:r,selector:e}):a}"undefined"!=typeof document&&(i||(i=new MutationObserver(function(){T()})),T(),i.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!1,characterData:!1}));var U={html:N,classes:K,attribute:I,position:H,declarative:function(e){var t=e.selector,r=e.action,n=e.value,i=e.attribute,s=e.parentSelector,u=e.insertBeforeSelector;if("html"===i){if("append"===r)return N(t,function(e){return e+(null!=n?n:"")});if("set"===r)return N(t,function(){return null!=n?n:""})}else if("class"===i){if("append"===r)return K(t,function(e){n&&e.add(n)});if("remove"===r)return K(t,function(e){n&&e.delete(n)});if("set"===r)return K(t,function(e){e.clear(),n&&e.add(n)})}else if("position"===i){if("set"===r&&s)return H(t,function(){return{insertBeforeSelector:u,parentSelector:s}})}else{if("append"===r)return I(t,i,function(e){return null!==e?e+(null!=n?n:""):null!=n?n:""});if("set"===r)return I(t,i,function(){return null!=n?n:""});if("remove"===r)return I(t,i,function(){return null})}return a}};function L(e){let t=2166136261,r=e.length;for(let n=0;n<r;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}function D(e,t,r){return 2===r?L(L(e+t)+"")%1e4/1e4:1===r?L(t+e)%1e3/1e3:null}function B(e,t){return e>=t[0]&&e<t[1]}function j(e){try{let t=e.replace(/([^\\])\//g,"$1\\/");return new RegExp(t)}catch(e){console.error(e);return}}let J=e=>Uint8Array.from(atob(e),e=>e.charCodeAt(0));async function q(e,t,r){if(t=t||"",!(r=r||globalThis.crypto&&globalThis.crypto.subtle))throw Error("No SubtleCrypto implementation found");try{let n=await r.importKey("raw",J(t),{name:"AES-CBC",length:128},!0,["encrypt","decrypt"]),[i,s]=e.split("."),a=await r.decrypt({name:"AES-CBC",iv:J(i)},n,J(s));return new TextDecoder().decode(a)}catch(e){throw Error("Failed to decrypt")}}function P(e){let t=e.replace(/(^v|\+.*$)/g,"").split(/[-.]/);return 3===t.length&&t.push("~"),t.map(e=>e.match(/^[0-9]+$/)?e.padStart(5," "):e).join("-")}let Q={};function z(e,t){if("$or"in t)return W(e,t.$or);if("$nor"in t)return!W(e,t.$nor);if("$and"in t)return function(e,t){for(let r=0;r<t.length;r++)if(!z(e,t[r]))return!1;return!0}(e,t.$and);if("$not"in t)return!z(e,t.$not);for(let[r,n]of Object.entries(t))if(!function e(t,r){if("string"==typeof t)return r+""===t;if("number"==typeof t)return 1*r===t;if("boolean"==typeof t)return!!r===t;if(null===t)return null===r;if(Array.isArray(t)||!G(t))return JSON.stringify(r)===JSON.stringify(t);for(let n in t)if(!function(t,r,n){switch(t){case"$veq":return P(r)===P(n);case"$vne":return P(r)!==P(n);case"$vgt":return P(r)>P(n);case"$vgte":return P(r)>=P(n);case"$vlt":return P(r)<P(n);case"$vlte":return P(r)<=P(n);case"$eq":return r===n;case"$ne":return r!==n;case"$lt":return r<n;case"$lte":return r<=n;case"$gt":return r>n;case"$gte":return r>=n;case"$exists":return n?null!==r:null===r;case"$in":if(!Array.isArray(n))return!1;return Z(r,n);case"$nin":if(!Array.isArray(n))return!1;return!Z(r,n);case"$not":return!e(n,r);case"$size":if(!Array.isArray(r))return!1;return e(n,r.length);case"$elemMatch":return function(t,r){if(!Array.isArray(t))return!1;let n=G(r)?t=>e(r,t):e=>z(e,r);for(let e=0;e<t.length;e++)if(t[e]&&n(t[e]))return!0;return!1}(r,n);case"$all":if(!Array.isArray(r))return!1;for(let t=0;t<n.length;t++){let i=!1;for(let s=0;s<r.length;s++)if(e(n[t],r[s])){i=!0;break}if(!i)return!1}return!0;case"$regex":try{return(Q[n]||(Q[n]=new RegExp(n.replace(/([^\\])\//g,"$1\\/"))),Q[n]).test(r)}catch(e){return!1}case"$type":return function(e){if(null===e)return"null";if(Array.isArray(e))return"array";let t=typeof e;return["string","number","boolean","object","undefined"].includes(t)?t:"unknown"}(r)===n;default:return console.error("Unknown operator: "+t),!1}}(n,r,t[n]))return!1;return!0}(n,function(e,t){let r=t.split("."),n=e;for(let e=0;e<r.length;e++){if(!n||"object"!=typeof n||!(r[e]in n))return null;n=n[r[e]]}return n}(e,r)))return!1;return!0}function G(e){let t=Object.keys(e);return t.length>0&&t.filter(e=>"$"===e[0]).length===t.length}function Z(e,t){return Array.isArray(e)?e.some(e=>t.includes(e)):t.includes(e)}function W(e,t){if(!t.length)return!0;for(let r=0;r<t.length;r++)if(z(e,t[r]))return!0;return!1}let X={staleTTL:6e4,cacheKey:"gbFeaturesCache",backgroundSync:!0,maxEntries:10},Y={fetch:globalThis.fetch?globalThis.fetch.bind(globalThis):void 0,SubtleCrypto:globalThis.crypto?globalThis.crypto.subtle:void 0,EventSource:globalThis.EventSource},ee={fetchFeaturesCall:e=>{let{host:t,clientKey:r,headers:n}=e;return Y.fetch("".concat(t,"/api/features/").concat(r),{headers:n})},fetchRemoteEvalCall:e=>{let{host:t,clientKey:r,payload:n,headers:i}=e,s={method:"POST",headers:{"Content-Type":"application/json",...i},body:JSON.stringify(n)};return Y.fetch("".concat(t,"/api/eval/").concat(r),s)},eventSourceCall:e=>{let{host:t,clientKey:r,headers:n}=e;return n?new Y.EventSource("".concat(t,"/sub/").concat(r),{headers:n}):new Y.EventSource("".concat(t,"/sub/").concat(r))}};try{globalThis.localStorage&&(Y.localStorage=globalThis.localStorage)}catch(e){}let et=new Map,er=!1,en=new Map,ei=new Map,es=new Map,ea=new Set;async function eu(e,t,r,n,i,s){s||(X.backgroundSync=!1);let a=await el(e,n,t,r);i&&a&&await em(e,a)}async function eo(){try{if(!Y.localStorage)return;await Y.localStorage.setItem(X.cacheKey,JSON.stringify(Array.from(en.entries())))}catch(e){}}async function el(e,t,r,n){var i;let s=ec(e),a=eh(e),u=new Date;await ef();let o=en.get(a);return o&&!n&&(t||o.staleAt>u)?(o.sse&&ea.add(s),o.staleAt<u?e_(e):eg(e),o.data):await (i=e_(e),new Promise(e=>{let t,n=!1,s=r=>{n||(n=!0,t&&clearTimeout(t),e(r||null))};r&&(t=setTimeout(()=>s(),r)),i.then(e=>s(e)).catch(()=>s())}))}function ec(e){let[t,r]=e.getApiInfo();return"".concat(t,"||").concat(r)}function eh(e){let t=ec(e);if(!e.isRemoteEval())return t;let r=e.getAttributes(),n=e.getCacheKeyAttributes()||Object.keys(e.getAttributes()),i={};n.forEach(e=>{i[e]=r[e]});let s=e.getForcedVariations(),a=e.getUrl();return"".concat(t,"||").concat(JSON.stringify({ca:i,fv:s,url:a}))}async function ef(){if(!er){er=!0;try{if(Y.localStorage){let e=await Y.localStorage.getItem(X.cacheKey);if(e){let t=JSON.parse(e);t&&Array.isArray(t)&&t.forEach(e=>{let[t,r]=e;en.set(t,{...r,staleAt:new Date(r.staleAt)})}),ed()}}}catch(e){}}}function ed(){let e=Array.from(en.entries()).map(e=>{let[t,r]=e;return{key:t,staleAt:r.staleAt.getTime()}}).sort((e,t)=>e.staleAt-t.staleAt),t=Math.min(Math.max(0,en.size-X.maxEntries),en.size);for(let r=0;r<t;r++)en.delete(e[r].key)}function ep(e,t,r){let n=r.dateUpdated||"",i=new Date(Date.now()+X.staleTTL),s=en.get(t);if(s&&n&&s.version===n){s.staleAt=i,eo();return}en.set(t,{data:r,version:n,staleAt:i,sse:ea.has(e)}),ed(),eo();let a=et.get(e);a&&a.forEach(e=>em(e,r))}async function em(e,t){await (t.encryptedExperiments?e.setEncryptedExperiments(t.encryptedExperiments,void 0,Y.SubtleCrypto):e.setExperiments(t.experiments||e.getExperiments())),await (t.encryptedFeatures?e.setEncryptedFeatures(t.encryptedFeatures,void 0,Y.SubtleCrypto):e.setFeatures(t.features||e.getFeatures()))}async function e_(e){let{apiHost:t,apiRequestHeaders:r}=e.getApiHosts(),n=e.getClientKey(),i=e.isRemoteEval(),s=ec(e),a=eh(e),u=ei.get(a);return u||(u=(i?ee.fetchRemoteEvalCall({host:t,clientKey:n,payload:{attributes:e.getAttributes(),forcedVariations:e.getForcedVariations(),forcedFeatures:Array.from(e.getForcedFeatures().entries()),url:e.getUrl()},headers:r}):ee.fetchFeaturesCall({host:t,clientKey:n,headers:r})).then(e=>("enabled"===e.headers.get("x-sse-support")&&ea.add(s),e.json())).then(t=>(ep(s,a,t),eg(e),ei.delete(a),t)).catch(e=>(ei.delete(a),Promise.resolve({}))),ei.set(a,u)),await u}function eg(e){let t=ec(e),r=eh(e),{streamingHost:n,streamingHostRequestHeaders:i}=e.getApiHosts(),s=e.getClientKey();if(X.backgroundSync&&ea.has(t)&&Y.EventSource){if(es.has(t))return;let e={src:null,cb:a=>{try{if("features-updated"===a.type){let e=et.get(t);e&&e.forEach(e=>{e_(e)})}else if("features"===a.type){let e=JSON.parse(a.data);ep(t,r,e)}e.errors=0}catch(t){ev(e,n,s,i)}},errors:0};es.set(t,e),ey(e,n,s,i)}}function ev(e,t,r,n){if(e.errors++,e.errors>3||e.src&&2===e.src.readyState){let i=Math.pow(3,e.errors-3)*(1e3+1e3*Math.random());e.src&&(e.src.onopen=null,e.src.onerror=null,e.src.close(),e.src=null),setTimeout(()=>{ey(e,t,r,n)},Math.min(i,3e5))}}function ey(e,t,r,n){e.src=ee.eventSourceCall({host:t,clientKey:r,headers:n}),e.src.addEventListener("features",e.cb),e.src.addEventListener("features-updated",e.cb),e.src.onerror=()=>{ev(e,t,r,n)},e.src.onopen=()=>{e.errors=0}}let eb="undefined"!=typeof window&&"undefined"!=typeof document;class ex{constructor(e){if(e=e||{},this._ctx=this.context=e,this._renderer=null,this._trackedExperiments=new Set,this._trackedFeatures={},this.debug=!1,this._subscriptions=new Set,this._rtQueue=[],this._rtTimer=0,this.ready=!1,this._assigned=new Map,this._forcedFeatureValues=new Map,this._attributeOverrides={},this._activeAutoExperiments=new Map,this._loadFeaturesCalled=!1,e.remoteEval){if(e.decryptionKey)throw Error("Encryption is not available for remoteEval");if(!e.clientKey)throw Error("Missing clientKey");let t=!1;try{t=!!new URL(e.apiHost||"").hostname.match(/growthbook\.io$/i)}catch(e){}if(t)throw Error("Cannot use remoteEval on GrowthBook Cloud")}else if(e.cacheKeyAttributes)throw Error("cacheKeyAttributes are only used for remoteEval");e.features&&(this.ready=!0),eb&&e.enableDevMode&&(window._growthbook=this,document.dispatchEvent(new Event("gbloaded"))),e.experiments&&(this.ready=!0,this._updateAllAutoExperiments()),e.clientKey&&!e.remoteEval&&this._refresh({},!0,!1)}async loadFeatures(e){e&&e.autoRefresh&&(this._ctx.subscribeToChanges=!0),this._loadFeaturesCalled=!0,await this._refresh(e,!0,!0),this._canSubscribe()&&function(e){let t=ec(e),r=et.get(t)||new Set;r.add(e),et.set(t,r)}(this)}async refreshFeatures(e){await this._refresh(e,!1,!0)}getApiInfo(){return[this.getApiHosts().apiHost,this.getClientKey()]}getApiHosts(){let e=this._ctx.apiHost||"https://cdn.growthbook.io";return{apiHost:e.replace(/\/*$/,""),streamingHost:(this._ctx.streamingHost||e).replace(/\/*$/,""),apiRequestHeaders:this._ctx.apiHostRequestHeaders,streamingHostRequestHeaders:this._ctx.streamingHostRequestHeaders}}getClientKey(){return this._ctx.clientKey||""}isRemoteEval(){return this._ctx.remoteEval||!1}getCacheKeyAttributes(){return this._ctx.cacheKeyAttributes}async _refresh(e,t,r){if(e=e||{},!this._ctx.clientKey)throw Error("Missing clientKey");await eu(this,e.timeout,e.skipCache||this._ctx.enableDevMode,t,r,!1!==this._ctx.backgroundSync)}_render(){this._renderer&&this._renderer()}setFeatures(e){this._ctx.features=e,this.ready=!0,this._render()}async setEncryptedFeatures(e,t,r){let n=await q(e,t||this._ctx.decryptionKey,r);this.setFeatures(JSON.parse(n))}setExperiments(e){this._ctx.experiments=e,this.ready=!0,this._updateAllAutoExperiments()}async setEncryptedExperiments(e,t,r){let n=await q(e,t||this._ctx.decryptionKey,r);this.setExperiments(JSON.parse(n))}setAttributes(e){if(this._ctx.attributes=e,this._ctx.remoteEval){this._refreshForRemoteEval();return}this._render(),this._updateAllAutoExperiments()}setAttributeOverrides(e){if(this._attributeOverrides=e,this._ctx.remoteEval){this._refreshForRemoteEval();return}this._render(),this._updateAllAutoExperiments()}setForcedVariations(e){if(this._ctx.forcedVariations=e||{},this._ctx.remoteEval){this._refreshForRemoteEval();return}this._render(),this._updateAllAutoExperiments()}setForcedFeatures(e){this._forcedFeatureValues=e,this._render()}setURL(e){if(this._ctx.url=e,this._ctx.remoteEval){this._refreshForRemoteEval().then(()=>this._updateAllAutoExperiments(!0));return}this._updateAllAutoExperiments(!0)}getAttributes(){return{...this._ctx.attributes,...this._attributeOverrides}}getForcedVariations(){return this._ctx.forcedVariations||{}}getForcedFeatures(){return this._forcedFeatureValues||new Map}getUrl(){return this._ctx.url||""}getFeatures(){return this._ctx.features||{}}getExperiments(){return this._ctx.experiments||[]}subscribe(e){return this._subscriptions.add(e),()=>{this._subscriptions.delete(e)}}_canSubscribe(){return!1!==this._ctx.backgroundSync&&this._ctx.subscribeToChanges}async _refreshForRemoteEval(){this._ctx.remoteEval&&this._loadFeaturesCalled&&await this._refresh({},!1,!0).catch(()=>{})}getAllResults(){return new Map(this._assigned)}destroy(){var e;this._subscriptions.clear(),this._assigned.clear(),this._trackedExperiments.clear(),this._trackedFeatures={},this._rtQueue=[],this._rtTimer&&clearTimeout(this._rtTimer),e=this,et.forEach(t=>t.delete(e)),eb&&window._growthbook===this&&delete window._growthbook,this._activeAutoExperiments.forEach(e=>{e.undo()}),this._activeAutoExperiments.clear()}setRenderer(e){this._renderer=e}forceVariation(e,t){if(this._ctx.forcedVariations=this._ctx.forcedVariations||{},this._ctx.forcedVariations[e]=t,this._ctx.remoteEval){this._refreshForRemoteEval();return}this._updateAllAutoExperiments(),this._render()}run(e){let t=this._run(e,null);return this._fireSubscriptions(e,t),t}triggerExperiment(e){if(!this._ctx.experiments)return null;let t=this._ctx.experiments.find(t=>t.key===e);return t&&t.manual?this._runAutoExperiment(t,!0):null}_runAutoExperiment(e,t,r){let n=e.key,i=this._activeAutoExperiments.get(n);if(e.manual&&!t&&!i)return null;let s=this.run(e),a=JSON.stringify(s.value);if(!r&&s.inExperiment&&i&&i.valueHash===a)return s;if(i&&this._undoActiveAutoExperiment(n),s.inExperiment){let t=this._applyDOMChanges(s.value);t&&this._activeAutoExperiments.set(e.key,{undo:t,valueHash:a})}return s}_undoActiveAutoExperiment(e){let t=this._activeAutoExperiments.get(e);t&&(t.undo(),this._activeAutoExperiments.delete(e))}_updateAllAutoExperiments(e){let t=this._ctx.experiments||[],r=new Set(t.map(e=>e.key));this._activeAutoExperiments.forEach((e,t)=>{r.has(t)||(e.undo(),this._activeAutoExperiments.delete(t))}),t.forEach(t=>{this._runAutoExperiment(t,!1,e)})}_fireSubscriptions(e,t){let r=e.key,n=this._assigned.get(r);n&&n.result.inExperiment===t.inExperiment&&n.result.variationId===t.variationId||(this._assigned.set(r,{experiment:e,result:t}),this._subscriptions.forEach(r=>{try{r(e,t)}catch(e){console.error(e)}}))}_trackFeatureUsage(e,t){if("override"===t.source)return;let r=JSON.stringify(t.value);if(this._trackedFeatures[e]!==r){if(this._trackedFeatures[e]=r,this._ctx.onFeatureUsage)try{this._ctx.onFeatureUsage(e,t)}catch(e){}eb&&window.fetch&&(this._rtQueue.push({key:e,on:t.on}),this._rtTimer||(this._rtTimer=window.setTimeout(()=>{this._rtTimer=0;let e=[...this._rtQueue];this._rtQueue=[],this._ctx.realtimeKey&&window.fetch("https://rt.growthbook.io/?key=".concat(this._ctx.realtimeKey,"&events=").concat(encodeURIComponent(JSON.stringify(e))),{cache:"no-cache",mode:"no-cors"}).catch(()=>{})},this._ctx.realtimeInterval||2e3)))}}_getFeatureResult(e,t,r,n,i,s){let a={value:t,on:!!t,off:!t,source:r,ruleId:n||""};return i&&(a.experiment=i),s&&(a.experimentResult=s),this._trackFeatureUsage(e,a),a}isOn(e){return this.evalFeature(e).on}isOff(e){return this.evalFeature(e).off}getFeatureValue(e,t){let r=this.evalFeature(e).value;return null===r?t:r}feature(e){return this.evalFeature(e)}evalFeature(e){if(this._forcedFeatureValues.has(e))return this._getFeatureResult(e,this._forcedFeatureValues.get(e),"override");if(!this._ctx.features||!this._ctx.features[e])return this._getFeatureResult(e,null,"unknownFeature");let t=this._ctx.features[e];if(t.rules)for(let r of t.rules){if(r.condition&&!this._conditionPasses(r.condition)||r.filters&&this._isFilteredOut(r.filters))continue;if("force"in r){if(!this._isIncludedInRollout(r.seed||e,r.hashAttribute,r.range,r.coverage,r.hashVersion))continue;return r.tracks&&r.tracks.forEach(e=>{this._track(e.experiment,e.result)}),this._getFeatureResult(e,r.force,"force",r.id)}if(!r.variations)continue;let t={variations:r.variations,key:r.key||e};"coverage"in r&&(t.coverage=r.coverage),r.weights&&(t.weights=r.weights),r.hashAttribute&&(t.hashAttribute=r.hashAttribute),r.namespace&&(t.namespace=r.namespace),r.meta&&(t.meta=r.meta),r.ranges&&(t.ranges=r.ranges),r.name&&(t.name=r.name),r.phase&&(t.phase=r.phase),r.seed&&(t.seed=r.seed),r.hashVersion&&(t.hashVersion=r.hashVersion),r.filters&&(t.filters=r.filters);let n=this._run(t,e);if(this._fireSubscriptions(t,n),n.inExperiment&&!n.passthrough)return this._getFeatureResult(e,n.value,"experiment",r.id,t,n)}return this._getFeatureResult(e,void 0===t.defaultValue?null:t.defaultValue,"defaultValue")}_isIncludedInRollout(e,t,r,n,i){if(!r&&void 0===n)return!0;let{hashValue:s}=this._getHashAttribute(t);if(!s)return!1;let a=D(e,s,i||1);return null!==a&&(r?B(a,r):void 0===n||a<=n)}_conditionPasses(e){return z(this.getAttributes(),e)}_isFilteredOut(e){return e.some(e=>{let{hashValue:t}=this._getHashAttribute(e.attribute);if(!t)return!0;let r=D(e.seed,t,e.hashVersion||2);return null===r||!e.ranges.some(e=>B(r,e))})}_run(e,t){let r=e.key,n=e.variations.length;if(n<2||!1===this._ctx.enabled)return this._getResult(e,-1,!1,t);e=this._mergeOverrides(e);let i=function(e,t,r){if(!t)return null;let n=t.split("?")[1];if(!n)return null;let i=n.replace(/#.*/,"").split("&").map(e=>e.split("=",2)).filter(t=>{let[r]=t;return r===e}).map(e=>{let[,t]=e;return parseInt(t)});return i.length>0&&i[0]>=0&&i[0]<r?i[0]:null}(r,this._getContextUrl(),n);if(null!==i)return this._getResult(e,i,!1,t);if(this._ctx.forcedVariations&&r in this._ctx.forcedVariations){let n=this._ctx.forcedVariations[r];return this._getResult(e,n,!1,t)}if("draft"===e.status||!1===e.active)return this._getResult(e,-1,!1,t);let{hashValue:s}=this._getHashAttribute(e.hashAttribute);if(!s)return this._getResult(e,-1,!1,t);if(e.filters){if(this._isFilteredOut(e.filters))return this._getResult(e,-1,!1,t)}else if(e.namespace&&!function(e,t){let r=D("__"+t[0],e,1);return null!==r&&r>=t[1]&&r<t[2]}(s,e.namespace))return this._getResult(e,-1,!1,t);if(e.include&&!function(e){try{return e()}catch(e){return console.error(e),!1}}(e.include)||e.condition&&!this._conditionPasses(e.condition)||e.groups&&!this._hasGroupOverlap(e.groups)||e.url&&!this._urlIsValid(e.url)||e.urlPatterns&&!function(e,t){if(!t.length)return!1;let r=!1,n=!1;for(let i=0;i<t.length;i++){let s=function(e,t,r){try{let n=new URL(e,"https://_");if("regex"===t){let e=j(r);if(!e)return!1;return e.test(n.href)||e.test(n.href.substring(n.origin.length))}if("simple"===t)return function(e,t){try{let r=new URL(t.replace(/^([^:/?]*)\./i,"https://$1.").replace(/\*/g,"_____"),"https://_____"),n=[[e.host,r.host,!1],[e.pathname,r.pathname,!0]];return r.hash&&n.push([e.hash,r.hash,!1]),r.searchParams.forEach((t,r)=>{n.push([e.searchParams.get(r)||"",t,!1])}),!n.some(e=>!function(e,t,r){try{let n=t.replace(/[*.+?^${}()|[\]\\]/g,"\\$&").replace(/_____/g,".*");return r&&(n="\\/?"+n.replace(/(^\/|\/$)/g,"")+"\\/?"),RegExp("^"+n+"$","i").test(e)}catch(e){return!1}}(e[0],e[1],e[2]))}catch(e){return!1}}(n,r);return!1}catch(e){return!1}}(e,t[i].type,t[i].pattern);if(!1===t[i].include){if(s)return!1}else r=!0,s&&(n=!0)}return n||!r}(this._getContextUrl(),e.urlPatterns))return this._getResult(e,-1,!1,t);let a=D(e.seed||r,s,e.hashVersion||1);if(null===a)return this._getResult(e,-1,!1,t);let u=function(e,t){for(let r=0;r<t.length;r++)if(B(e,t[r]))return r;return -1}(a,e.ranges||function(e,t,r){(t=void 0===t?1:t)<0?t=0:t>1&&(t=1);let n=e<=0?[]:Array(e).fill(1/e);(r=r||n).length!==e&&(r=n);let i=r.reduce((e,t)=>t+e,0);(i<.99||i>1.01)&&(r=n);let s=0;return r.map(e=>{let r=s;return s+=e,[r,r+t*e]})}(n,void 0===e.coverage?1:e.coverage,e.weights));if(u<0)return this._getResult(e,-1,!1,t);if("force"in e)return this._getResult(e,void 0===e.force?-1:e.force,!1,t);if(this._ctx.qaMode||"stopped"===e.status)return this._getResult(e,-1,!1,t);let o=this._getResult(e,u,!0,t,a);return this._track(e,o),o}log(e,t){this.debug&&(this._ctx.log?this._ctx.log(e,t):console.log(e,t))}_track(e,t){if(!this._ctx.trackingCallback)return;let r=e.key,n=t.hashAttribute+t.hashValue+r+t.variationId;if(!this._trackedExperiments.has(n)){this._trackedExperiments.add(n);try{this._ctx.trackingCallback(e,t)}catch(e){console.error(e)}}}_mergeOverrides(e){let t=e.key,r=this._ctx.overrides;return r&&r[t]&&"string"==typeof(e=Object.assign({},e,r[t])).url&&(e.url=j(e.url)),e}_getHashAttribute(e){let t=e||"id",r="";return this._attributeOverrides[t]?r=this._attributeOverrides[t]:this._ctx.attributes?r=this._ctx.attributes[t]||"":this._ctx.user&&(r=this._ctx.user[t]||""),{hashAttribute:t,hashValue:r}}_getResult(e,t,r,n,i){let s=!0;(t<0||t>=e.variations.length)&&(t=0,s=!1);let{hashAttribute:a,hashValue:u}=this._getHashAttribute(e.hashAttribute),o=e.meta?e.meta[t]:{},l={key:o.key||""+t,featureId:n,inExperiment:s,hashUsed:r,variationId:t,value:e.variations[t],hashAttribute:a,hashValue:u};return o.name&&(l.name=o.name),void 0!==i&&(l.bucket=i),o.passthrough&&(l.passthrough=o.passthrough),l}_getContextUrl(){return this._ctx.url||(eb?window.location.href:"")}_urlIsValid(e){let t=this._getContextUrl();if(!t)return!1;let r=t.replace(/^https?:\/\//,"").replace(/^[^/]*\//,"/");return!!(e.test(t)||e.test(r))}_hasGroupOverlap(e){let t=this._ctx.groups||{};for(let r=0;r<e.length;r++)if(t[e[r]])return!0;return!1}_applyDOMChanges(e){if(!eb)return;let t=[];if(e.css){let r=document.createElement("style");r.innerHTML=e.css,document.head.appendChild(r),t.push(()=>r.remove())}if(e.js){let r=document.createElement("script");r.innerHTML=e.js,document.body.appendChild(r),t.push(()=>r.remove())}return e.domMutations&&e.domMutations.forEach(e=>{t.push(U.declarative(e).revert)}),()=>{t.forEach(e=>e())}}}var eE=r(30247);let eA=eE.createContext({});function ew(e){let t=eF();return t?t.evalFeature(e):{value:null,on:!1,off:!0,source:"unknownFeature",ruleId:""}}function eS(e){let t=eF();return!!t&&t.isOn(e)}function ek(e,t){let r=eF();return r?r.getFeatureValue(e,t):t}function eF(){let{growthbook:e}=eE.useContext(eA);return e}let eR=({children:e,growthbook:t})=>{let[r,n]=eE.useState(0);return eE.useEffect(()=>{if(t&&t.setRenderer)return t.setRenderer(()=>{n(e=>e+1)}),()=>{t.setRenderer(()=>{})}},[t]),eE.createElement(eA.Provider,{value:{growthbook:t}},e)}}}]);